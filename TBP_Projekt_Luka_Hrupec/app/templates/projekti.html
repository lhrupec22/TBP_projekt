<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <title>Projekti</title>
</head>
<body>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<nav style="margin-bottom:20px;">
    <a href="/">Projekti</a> |
    <a href="/radne_sesije">Radne sesije</a> |
    <a href="/izvjestaji">Izvještaji</a>
</nav>

<hr>
<div class="container">
<h1>Popis projekata</h1>

<table border="1" cellpadding="5">
    <tr>
        <th>ID</th>
        <th>Naziv</th>
        <th>Početak</th>
        <th>Završetak</th>
        <th>Status</th>
        <th>Promjena statusa</th>
    </tr>

    {% for projekt in projekti %}
    <tr>
        <td>{{ projekt[0] }}</td>
        <td>{{ projekt[1] }}</td>
        <td>{{ projekt[2] }}</td>
        <td>{{ projekt[3] }}</td>
        <td>{{ projekt[4] }}</td>
        <td>
            <form method="post" action="/promijeni_status">
                <input type="hidden" name="projekt_id" value="{{ projekt[0] }}">
                <select name="novi_status">
                    acknowledge
                    <option value="planiran">planiran</option>
                    <option value="u_izradi">u izradi</option>
                    <option value="zavrsen">zavrsen</option>
                </select>
                <button type="submit">Spremi</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
</div>
<div class="container">
    <h2>Upravljanje projektima i dodatnim troškovima</h2>

    <div class="form-row">

        <!-- FORMA: DODAJ PROJEKT -->
        <div class="form-box">
            <h3>Dodaj novi projekt</h3>

            <form method="post" action="/dodaj_projekt">
                <label>Naziv projekta:</label>
                <input type="text" name="naziv" required>

                <label>Datum početka:</label>
                <input type="date" name="datum_pocetka" required>

                <label>Datum završetka:</label>
                <input type="date" name="datum_zavrsetka" required>

                <label>Broj potrebnih radnika:</label>
                <input type="number" name="predvideni_broj_radnika" min="1" required>

                <label>Status projekta:</label>
                <select name="status">
                    <option value="planiran">planiran</option>
                    <option value="u_izradi">u izradi</option>
                    <option value="zavrsen">završen</option>
                </select>

                <label>Budžet buffer:</label>
                <input type="number" step="0.01" name="budzet_buffer" required>

                <button type="submit">Dodaj projekt</button>
            </form>
        </div>

        <!-- FORMA: DODATNI TROŠAK -->
        <div class="form-box">
            <h3>Dodaj dodatni trošak</h3>

            <form method="post" action="/dodaj_dodatni_trosak">
                <label>Projekt:</label>
                <select name="projekt_id" required>
                    <option value="" disabled selected>Odaberi projekt</option>
                    {% for projekt in projekti %}
                    <option value="{{ projekt[0] }}">{{ projekt[1] }}</option>
                    {% endfor %}
                </select>

                <label>Opis troška:</label>
                <input type="text" name="opis" required>

                <label>Iznos:</label>
                <input type="number" step="0.01" name="iznos" required>

                <button type="submit">Dodaj trošak</button>
            </form>
        </div>

    </div>
</div>






</body>
</html>
